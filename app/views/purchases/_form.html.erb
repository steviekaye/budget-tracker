<%= form_with model: @purchase, local: true do |form| %>

<% if @purchase.errors.any? %>
  <div id="error_explanation" class="content">
    <p class="has-text-danger is-size-4">
      <%= pluralize(@purchase.errors.count, "error") %>
      prohibited this purchase from being saved:
    </p>
    <ul>
      <% @purchase.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="field">
  <%= form.label :date, class: "label" %>
  <div class="control">
    <%= form.date_field :date , class: "input" %>
  </div>
</div>

<div class="field">
  <%= form.label :description, class: "label" %>
  <div class="control">
    <%= form.text_field :description, class: "input" %>
  </div>
</div>

<div class="field">
  <%= form.label :amount, class: "label" %>
  <div class="control">
    <%= form.number_field :amount, class: "input", step: :any %>
  </div>
</div>

<div class="field">
  <label class="label">Category</label>
  <div class="control">
    <%= select_tag(:subcategory_id, grouped_options_for_select(@categories.map do |c| [c.name, c.subcategories.map { |s| [s.name, s.id] }] end), prompt: "Select one!", class: "select" ) %>
  </div>
</div>

<div class="field">
  <%= form.label :payee, class: "label" %>
  <div class="control">
    <%= form.text_field :payee, class: "input" %>
  </div>
</div>

<label class="label">Purchaser</label>
<div class="field is-grouped">
  <div class="control">
    <%= radio_button_tag(:user_id, User.find_by(name: 'Ellen').id) %>
    <%= label_tag(:user_ellen, "Ellen") %>
  </div>
  <div class="control">
    <%= radio_button_tag(:user_id, (User.find_by(name: 'Ben')).id) %>
    <%= label_tag(:user_ben, "Ben") %>
  </div>
</div>

<div class="field">
  <%= form.submit class: 'button is-dark' %>
</div>

<% end %>